<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    <meta name="viewport" content="initial-scale=.75">
    <script src="../../scripts/prettify/prettify.js"></script>
    <script src="../../scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="../../styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="../../styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><span><a href="../../index.html">Home</a> <span class="github-short">| <a href="https://github.com/azure/azure-sdk-for-node.git">GitHub</a></span></span></h2><h3>Classes</h3><ul><li><a href="BatchServiceClient.html">BatchServiceClient</a><ul class='methods'><li data-type='method'><a href="BatchServiceClient.html#addOperation">addOperation</a></li><li data-type='method'><a href="BatchServiceClient.html#beginBatch">beginBatch</a></li><li data-type='method'><a href="BatchServiceClient.html#commitBatch">commitBatch</a></li><li data-type='method'><a href="BatchServiceClient.html#hasOperations">hasOperations</a></li><li data-type='method'><a href="BatchServiceClient.html#isInBatch">isInBatch</a></li><li data-type='method'><a href="BatchServiceClient.html#processOperation">processOperation</a></li><li data-type='method'><a href="BatchServiceClient.html#processResponse">processResponse</a></li><li data-type='method'><a href="BatchServiceClient.html#rollback">rollback</a></li></ul></li><li><a href="BlobService.html">BlobService</a><ul class='methods'><li data-type='method'><a href="BlobService.html#_createBlobFromChunkStream">_createBlobFromChunkStream</a></li><li data-type='method'><a href="BlobService.html#abortCopyBlob">abortCopyBlob</a></li><li data-type='method'><a href="BlobService.html#acquireLease">acquireLease</a></li><li data-type='method'><a href="BlobService.html#breakLease">breakLease</a></li><li data-type='method'><a href="BlobService.html#clearBlobPages">clearBlobPages</a></li><li data-type='method'><a href="BlobService.html#commitBlobBlocks">commitBlobBlocks</a></li><li data-type='method'><a href="BlobService.html#copyBlob">copyBlob</a></li><li data-type='method'><a href="BlobService.html#createBlob">createBlob</a></li><li data-type='method'><a href="BlobService.html#createBlobBlockFromStream">createBlobBlockFromStream</a></li><li data-type='method'><a href="BlobService.html#createBlobBlockFromText">createBlobBlockFromText</a></li><li data-type='method'><a href="BlobService.html#createBlobPagesFromStream">createBlobPagesFromStream</a></li><li data-type='method'><a href="BlobService.html#createBlobPagesFromText">createBlobPagesFromText</a></li><li data-type='method'><a href="BlobService.html#createBlobSnapshot">createBlobSnapshot</a></li><li data-type='method'><a href="BlobService.html#createBlockBlobFromFile">createBlockBlobFromFile</a></li><li data-type='method'><a href="BlobService.html#createBlockBlobFromStream">createBlockBlobFromStream</a></li><li data-type='method'><a href="BlobService.html#createBlockBlobFromText">createBlockBlobFromText</a></li><li data-type='method'><a href="BlobService.html#createContainer">createContainer</a></li><li data-type='method'><a href="BlobService.html#createContainerIfNotExists">createContainerIfNotExists</a></li><li data-type='method'><a href="BlobService.html#createPageBlob">createPageBlob</a></li><li data-type='method'><a href="BlobService.html#createPageBlobFromFile">createPageBlobFromFile</a></li><li data-type='method'><a href="BlobService.html#createPageBlobFromStream">createPageBlobFromStream</a></li><li data-type='method'><a href="BlobService.html#deleteBlob">deleteBlob</a></li><li data-type='method'><a href="BlobService.html#deleteContainer">deleteContainer</a></li><li data-type='method'><a href="BlobService.html#generateBlockIdPrefix">generateBlockIdPrefix</a></li><li data-type='method'><a href="BlobService.html#generateSharedAccessSignature">generateSharedAccessSignature</a></li><li data-type='method'><a href="BlobService.html#getBlob">getBlob</a></li><li data-type='method'><a href="BlobService.html#getBlobMetadata">getBlobMetadata</a></li><li data-type='method'><a href="BlobService.html#getBlobProperties">getBlobProperties</a></li><li data-type='method'><a href="BlobService.html#getBlobToFile">getBlobToFile</a></li><li data-type='method'><a href="BlobService.html#getBlobToStream">getBlobToStream</a></li><li data-type='method'><a href="BlobService.html#getBlobToText">getBlobToText</a></li><li data-type='method'><a href="BlobService.html#getBlobUrl">getBlobUrl</a></li><li data-type='method'><a href="BlobService.html#getBlockId">getBlockId</a></li><li data-type='method'><a href="BlobService.html#getContainerAcl">getContainerAcl</a></li><li data-type='method'><a href="BlobService.html#getContainerMetadata">getContainerMetadata</a></li><li data-type='method'><a href="BlobService.html#getContainerProperties">getContainerProperties</a></li><li data-type='method'><a href="BlobService.html#getServiceProperties">getServiceProperties</a></li><li data-type='method'><a href="BlobService.html#listBlobBlocks">listBlobBlocks</a></li><li data-type='method'><a href="BlobService.html#listBlobRegions">listBlobRegions</a></li><li data-type='method'><a href="BlobService.html#listBlobs">listBlobs</a></li><li data-type='method'><a href="BlobService.html#listContainers">listContainers</a></li><li data-type='method'><a href="BlobService.html#putBlockBlobFromFile">putBlockBlobFromFile</a></li><li data-type='method'><a href="BlobService.html#putBlockBlobFromStream">putBlockBlobFromStream</a></li><li data-type='method'><a href="BlobService.html#releaseLease">releaseLease</a></li><li data-type='method'><a href="BlobService.html#renewLease">renewLease</a></li><li data-type='method'><a href="BlobService.html#setBlobMetadata">setBlobMetadata</a></li><li data-type='method'><a href="BlobService.html#setBlobProperties">setBlobProperties</a></li><li data-type='method'><a href="BlobService.html#setContainerAcl">setContainerAcl</a></li><li data-type='method'><a href="BlobService.html#setContainerMetadata">setContainerMetadata</a></li><li data-type='method'><a href="BlobService.html#setServiceProperties">setServiceProperties</a></li><li data-type='method'><a href="BlobService.html#statusOfCopyBlob">statusOfCopyBlob</a></li></ul></li><li><a href="QueueService.html">QueueService</a><ul class='methods'><li data-type='method'><a href="QueueService.html#clearMessages">clearMessages</a></li><li data-type='method'><a href="QueueService.html#createMessage">createMessage</a></li><li data-type='method'><a href="QueueService.html#createQueue">createQueue</a></li><li data-type='method'><a href="QueueService.html#createQueueIfNotExists">createQueueIfNotExists</a></li><li data-type='method'><a href="QueueService.html#deleteMessage">deleteMessage</a></li><li data-type='method'><a href="QueueService.html#deleteQueue">deleteQueue</a></li><li data-type='method'><a href="QueueService.html#getMessages">getMessages</a></li><li data-type='method'><a href="QueueService.html#getQueueMetadata">getQueueMetadata</a></li><li data-type='method'><a href="QueueService.html#getServiceProperties">getServiceProperties</a></li><li data-type='method'><a href="QueueService.html#listQueues">listQueues</a></li><li data-type='method'><a href="QueueService.html#peekMessages">peekMessages</a></li><li data-type='method'><a href="QueueService.html#setQueueMetadata">setQueueMetadata</a></li><li data-type='method'><a href="QueueService.html#setServiceProperties">setServiceProperties</a></li><li data-type='method'><a href="QueueService.html#updateMessage">updateMessage</a></li></ul></li><li><a href="SharedAccessSignature.html">SharedAccessSignature</a><ul class='methods'><li data-type='method'><a href="SharedAccessSignature.html#_generateSignature">_generateSignature</a></li><li data-type='method'><a href="SharedAccessSignature.html#_permissionMatchesRequest">_permissionMatchesRequest</a></li><li data-type='method'><a href="SharedAccessSignature.html#generateSignedQueryString">generateSignedQueryString</a></li><li data-type='method'><a href="SharedAccessSignature.html#signRequest">signRequest</a></li></ul></li><li><a href="SharedKey.html">SharedKey</a><ul class='methods'><li data-type='method'><a href="SharedKey.html#signRequest">signRequest</a></li></ul></li><li><a href="SharedKeyLite.html">SharedKeyLite</a><ul class='methods'><li data-type='method'><a href="SharedKeyLite.html#signRequest">signRequest</a></li></ul></li><li><a href="SharedKeyLiteTable.html">SharedKeyLiteTable</a><ul class='methods'><li data-type='method'><a href="SharedKeyLiteTable.html#signRequest">signRequest</a></li></ul></li><li><a href="SharedKeyTable.html">SharedKeyTable</a><ul class='methods'><li data-type='method'><a href="SharedKeyTable.html#signRequest">signRequest</a></li></ul></li><li><a href="TableQuery.html">TableQuery</a><ul class='methods'><li data-type='method'><a href="TableQuery.html#.select">select</a></li><li data-type='method'><a href="TableQuery.html#_replaceOperators">_replaceOperators</a></li><li data-type='method'><a href="TableQuery.html#and">and</a></li><li data-type='method'><a href="TableQuery.html#from">from</a></li><li data-type='method'><a href="TableQuery.html#or">or</a></li><li data-type='method'><a href="TableQuery.html#top">top</a></li><li data-type='method'><a href="TableQuery.html#toPath">toPath</a></li><li data-type='method'><a href="TableQuery.html#toQueryObject">toQueryObject</a></li><li data-type='method'><a href="TableQuery.html#where">where</a></li><li data-type='method'><a href="TableQuery.html#whereKeys">whereKeys</a></li><li data-type='method'><a href="TableQuery.html#whereNextKeys">whereNextKeys</a></li></ul></li><li><a href="TableService.html">TableService</a><ul class='methods'><li data-type='method'><a href="TableService.html#createTable">createTable</a></li><li data-type='method'><a href="TableService.html#createTableIfNotExists">createTableIfNotExists</a></li><li data-type='method'><a href="TableService.html#deleteEntity">deleteEntity</a></li><li data-type='method'><a href="TableService.html#deleteTable">deleteTable</a></li><li data-type='method'><a href="TableService.html#getServiceProperties">getServiceProperties</a></li><li data-type='method'><a href="TableService.html#getTable">getTable</a></li><li data-type='method'><a href="TableService.html#insertEntity">insertEntity</a></li><li data-type='method'><a href="TableService.html#insertOrMergeEntity">insertOrMergeEntity</a></li><li data-type='method'><a href="TableService.html#insertOrReplaceEntity">insertOrReplaceEntity</a></li><li data-type='method'><a href="TableService.html#mergeEntity">mergeEntity</a></li><li data-type='method'><a href="TableService.html#queryEntities">queryEntities</a></li><li data-type='method'><a href="TableService.html#queryEntity">queryEntity</a></li><li data-type='method'><a href="TableService.html#queryTables">queryTables</a></li><li data-type='method'><a href="TableService.html#setServiceProperties">setServiceProperties</a></li><li data-type='method'><a href="TableService.html#updateEntity">updateEntity</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#BatchOperation">BatchOperation</a></li><li><a href="global.html#BlobBlockRangeStream">BlobBlockRangeStream</a></li><li><a href="global.html#BlobPageRangeStream">BlobPageRangeStream</a></li><li><a href="global.html#ChunkAllocator">ChunkAllocator</a></li><li><a href="global.html#ChunkStream">ChunkStream</a></li><li><a href="global.html#ChunkStreamWithStream">ChunkStreamWithStream</a></li><li><a href="global.html#CommonOperation">CommonOperation</a></li><li><a href="global.html#createBlobService">createBlobService</a></li><li><a href="global.html#createQueueService">createQueueService</a></li><li><a href="global.html#createTableService">createTableService</a></li><li><a href="global.html#FileReadStream">FileReadStream</a></li><li><a href="global.html#ListBlobsResultContinuation">ListBlobsResultContinuation</a></li><li><a href="global.html#ListContainersResultContinuation">ListContainersResultContinuation</a></li><li><a href="global.html#ListQueuesResultContinuation">ListQueuesResultContinuation</a></li><li><a href="global.html#OperationState">OperationState</a></li><li><a href="global.html#QueryTablesResultContinuation">QueryTablesResultContinuation</a></li><li><a href="global.html#RestOperation">RestOperation</a></li><li><a href="global.html#SpeedSummary">SpeedSummary</a></li><li><a href="global.html#toHumanReadableSize">toHumanReadableSize</a></li></ul>
</nav>

<div id="main">
    
      <a class="github-banner" href="https://github.com/azure/azure-sdk-for-node.git"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    
    

    



    









    


    <section class="readme">
        <article><h1>Microsoft Azure SDK for Node.js - Legacy Storage</h1><p>This project provides a Node.js package that lets you consume Azure storage services.<br>This package exists to provide back compatibility with previous versions of the azure<br>sdk for node.</p>
<ul>
<li><strong>API version: 2013-03-01</strong></li>
</ul>
<h2>Features</h2><ul>
<li>Blob client</li>
<li>Table Store client</li>
<li>Queue client</li>
</ul>
<h2>How to Install</h2><pre class="prettyprint source lang-bash"><code>npm install azure-storage-legacy</code></pre><h2>How to Use</h2><h2>Usage</h2><h3>Table Storage</h3><p>To ensure a table exists, call <strong>createTableIfNotExists</strong>:</p>
<pre class="prettyprint source lang-Javascript"><code>var tableService = storage.createTableService();
tableService.createTableIfNotExists('tasktable', function(error){
    if(!error){
        // Table exists
    }
});</code></pre><p>A new entity can be added by calling <strong>insertEntity</strong>:</p>
<pre class="prettyprint source lang-Javascript"><code>var tableService = storage.createTableService(),
    task1 = {
        PartitionKey : 'tasksSeattle',
        RowKey: '1',
        Description: 'Take out the trash',
        DueDate: new Date(2011, 12, 14, 12)
    };
tableService.insertEntity('tasktable', task1, function(error){
    if(!error){
        // Entity inserted
    }
});</code></pre><p>The method <strong>queryEntity</strong> can then be used to fetch the entity that was just inserted:</p>
<pre class="prettyprint source lang-Javascript"><code>var tableService = storage.createTableService();
tableService.queryEntity('tasktable', 'tasksSeattle', '1', function(error, serverEntity){
    if(!error){
        // Entity available in serverEntity variable
    }
});</code></pre><h2>Blob Storage</h2><p>The <strong>createContainerIfNotExists</strong> method can be used to create a<br>container in which to store a blob:</p>
<pre class="prettyprint source lang-Javascript"><code>var blobService = storage.createBlobService();
blobService.createContainerIfNotExists('taskcontainer', {publicAccessLevel : 'blob'}, function(error){
    if(!error){
        // Container exists and is public
    }
});</code></pre><p>To upload a file (assuming it is called task1-upload.txt and it is placed in the same folder as the script below), the method <strong>createBlob</strong> can be used. This method will return a writable stream which can be writen to, for instance, through piping:</p>
<pre class="prettyprint source lang-Javascript"><code>var blobService = storage.createBlobService();

fs.createReadStream('task1-upload.txt').pipe(blobService.createBlob('taskcontainer', 'task1', storage.Constants.BlobConstants.BlobTypes.BLOCK));</code></pre><p>To download the blob and write it to the file system, a similar <strong>getBlob</strong> method can be used:</p>
<pre class="prettyprint source lang-Javascript"><code>var blobService = storage.createBlobService();

blobService.getBlob('taskcontainer', 'task1').pipe(fs.createWriteStream('task1-download.txt'));</code></pre><p>To create a SAS URL you can use the <strong>getBlobUrl</strong> method. Additionally you can use the <strong>date</strong> helper functions to easily create a SAS that expires at some point relative to the current time.</p>
<pre class="prettyprint source lang-Javascript"><code>var blobService = storage.createBlobService();

//create a SAS that expires in an hour
var sharedAccessPolicy = {
    AccessPolicy: {
        Expiry: storage.date.minutesFromNow(60);
    }
};

var sasUrl = blobService.getBlobUrl(containerName, blobName, sharedAccessPolicy);</code></pre><h2>Storage Queues</h2><p>The <strong>createQueueIfNotExists</strong> method can be used to ensure a queue exists:</p>
<pre class="prettyprint source lang-Javascript"><code>var queueService = storage.createQueueService();
queueService.createQueueIfNotExists('taskqueue', function(error){
    if(!error){
        // Queue exists
    }
});</code></pre><p>The <strong>createMessage</strong> method can then be called to insert the message into the queue:</p>
<pre class="prettyprint source lang-Javascript"><code>var queueService = storage.createQueueService();
queueService.createMessage('taskqueue', 'Hello world!', function(error){
    if(!error){
        // Message inserted
    }
});</code></pre><p>It is then possible to call the <strong>getMessage</strong> method, process the message and then call <strong>deleteMessage</strong> inside the callback. This two-step process ensures messages don't get lost when they are removed from the queue.</p>
<pre class="prettyprint source lang-Javascript"><code>var queueService = storage.createQueueService(),
    queueName = 'taskqueue';
queueService.getMessages(queueName, function(error, serverMessages){
    if(!error){
        // Process the message in less than 30 seconds, the message
        // text is available in serverMessages[0].messagetext

        queueService.deleteMessage(queueName, serverMessages[0].messageid, serverMessages[0].popreceipt, function(error){
            if(!error){
                // Message deleted
            }
        });
    }
});</code></pre><h2>Related projects</h2><ul>
<li><a href="https://github.com/WindowsAzure/azure-sdk-for-node">Microsoft Azure SDK for Node.js</a></li>
<li><a href="https://github.com/WindowsAzure/azure-sdk-for-node/tree/master/lib/services/blob">Microsoft Azure SDK for Node.js - Storage Blob</a></li>
<li><a href="https://github.com/WindowsAzure/azure-sdk-for-node/tree/master/lib/services/table">Microsoft Azure SDK for Node.js - Storage Table</a></li>
<li><a href="https://github.com/WindowsAzure/azure-sdk-for-node/tree/master/lib/services/queue">Microsoft Azure SDK for Node.js - Storage Queue</a></li>
</ul></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Apr 05 2017 11:41:15 GMT-0700 (PDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="../../scripts/linenumber.js"></script>
</body>
</html>